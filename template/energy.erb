set terminal pdf linewidth 3 size 6,3 enhanced color font ',9'
set termoption dash

set out "<%= @output %>"
#set multiplot layout <%= @nodes.size+ 1 %>,1

# Bornes du graphe
#set xrange [0:60]
#set yrange [90:130]

# Affichage d'une bordure grise
set border 15 linewidth 0.5 lc rgb "gray"

set xtics nomirror textcolor rgb "black"
set ytics nomirror textcolor rgb "black"

# Definition des styles de lignes
# lt : linetype

# lw : linewidth
# lc : linecolor
set style line 1 lt 1 lw 0.5 pt 15 lc rgbcolor '#CC5496'
set style line 2 lt 1 lw 0.5 pt 7 lc rgb "blue"
set style line 3 lt 1 lw 0.5 pt 13 lc rgb "orange"
set style line 4 lt 1 lw 0.5 pt 9 lc rgb "violet"
set style line 5 lt 1 lw 0.5 pt 5 lc rgb "red"

set style line 20 lt 1 dt 3 lw 0.8 pt 5 lc rgb "black"

# Start and end of run
set arrow from first <%= @run_start %>,graph 0 to first <%= @run_start %>,graph 1 nohead ls 20
set arrow from first <%= @run_end %>,graph 0 to first <%= @run_end %>,graph 1 nohead ls 20

# Affichage de 0 sur les deux axes
#set xzeroaxis lt 1 lw 0.5 lc rgb "black"
#unset yzeroaxis

# CSV
set datafile separator ","

# Legend
set key autotitle columnhead inside top right

set xlabel 'Time (sec)'
set ylabel 'Energy (watt)'

set title "<%= @title %>"
plot "<%= @source %>"\
	<% @nodes.size.times do |i| %>\
		<% if i > 0 %>'' <% end %>using 1:<%= i+2 %> with lines ls <%= i%>\
		<% if i-1 < @nodes.size %>,\<% end %>
	<% end %>

unset key

<% @nodes.size.times do |i| %>\
set title "<%= @title %>: <%= @nodes[i] %>"
plot "<%= @source %>" using 1:<%= i+2 %> with lines ls <%= i%>
<% end %>
